<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>I2Cexpander - A collection of I2C I/O devices: I2C IO Expander wrapper library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">I2Cexpander - A collection of I2C I/O devices
   </div>
   <div id="projectbrief">Another SPCoast Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">I2C IO Expander wrapper library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>This library provides a common interface to a variety of I2C expanders, ADC/DAC devices and Arduino/Photon/Wemos/ESP platform-local pins.</p>
<p>The design philosophy is to abstract the setup and initialization of the various chipsets into an "init" function, and then provide high level "read" and "write" calls that do the right thing. It is built on top of the base Wire infrastructure, and coexists (but does not inter-operate) with other I2C device libraries.</p>
<p>This version is limited to a single I2C bus; it does not know how to manage/route through I2C muxes or switch between different MCU I2C appliances.</p>
<p>The digitalWrite/Read functions are convenience interfaces, but not very performant - You should use the Arduino provided ones for onboard pins if you need performance.</p>
<p>The support for PHOTON is rudimentary - their emulation of the Arduino environment is problematic.</p>
<p>It is based on an array of devices that can be read and written as desired. Instead of extending the digitalRead()/digitalWrite abstraction, I chose to read and write in units of 4,6, 8 or 16 bits, depending on the device in question.</p>
<p>In the model railroad community, this is slightly reminiscent of the Chubb CMRI system's design</p>
<p>To put this in context, this is part of a code-generated control system for a model railroad layout where there are many microcontrollers in use, one for every place on the layout where there are things to control.</p>
<p>My default program flow is</p>
<pre>
 define each layout device (signal heads, turnout controllers, occupancy detectors,...) along with the particular bits are used to talk to it.
 loop() {
     read the layout state
     walk thru every device and ask it to update itself
     if anything changed, handle the side effects (i.e., track becomes occupied, signal needs to turn red...)
     if needed, update outputs (i.e., write new values)
 }
 </pre><p>The list of supported I2C expanders is </p><div class="fragment"><div class="line">  PCA9555       <span class="comment">// Bits 0  1  2  3  4  5  6  7  8   9  10  11  12  13  14  15  16</span></div><div class="line">  MCP23016      <span class="comment">// Bits 0  1  2  3  4  5  6  7  8   9  10  11  12  13  14  15  16</span></div><div class="line">  PCF8574       <span class="comment">// Bits 0  1  2  3  4  5  6  7  8</span></div><div class="line">  PCF8574A      <span class="comment">// Bits 0  1  2  3  4  5  6  7  8</span></div><div class="line">  PCF8591       <span class="comment">// 4 8-bit A/D converters, 1 8-bit D/A</span></div><div class="line">  MAX731x       <span class="comment">// Bits 0  1  2  3  4  5  6  7  8   9  10  11  12  13  14  15  16</span></div><div class="line">  PCA9685</div><div class="line"></div><div class="line">Pseudo-expanders - can read and write built in pins (as digital I/O) as well:</div><div class="line"></div><div class="line"><span class="comment">// if defined(ARDUINO_AVR_DUEMILANOVE)</span></div><div class="line">  <span class="comment">// built-in Arduino ports, skipping RX/TX, Lnet RX/TX and I2C pins</span></div><div class="line">  ARDIO_A       <span class="comment">// Pins D2   D3  D4   D5   - low digital</span></div><div class="line">  ARDIO_B       <span class="comment">//      D6   D9  D10  D11  - high digital</span></div><div class="line">  ARDIO_C       <span class="comment">//      D12  D13 A0   A1   - mixed, digital and analog</span></div><div class="line">  ARDIO_D       <span class="comment">//      A2   A3  A6   A7   - analog (A6 &amp; A7 are input only)</span></div><div class="line"><span class="comment">// endif</span></div><div class="line"><span class="comment">// if defined(SPARK_CORE) // Built in Photon Ports</span></div><div class="line">  PHOTON_A      <span class="comment">// Pins D2, D3, D4,  D5,  -- -- -- --</span></div><div class="line">  PHOTON_B      <span class="comment">//      D6, D7, A0,  A1,  -- -- -- --</span></div><div class="line">  PHOTON_C      <span class="comment">//      A2, A3, DAC, WKP, -- -- -- --</span></div><div class="line"><span class="comment">// endif</span></div><div class="line"><span class="comment">// if defined(ARDUINO_ESP8266_WEMOS_D1MINI)</span></div><div class="line">  WEMOS_A       <span class="comment">// Pins D2 D3 D4 D5     GPIO  4,  0,  2, 14</span></div><div class="line">  WEMOS_B       <span class="comment">//      D6 D7 RX TX          12, 13,  3,  1</span></div><div class="line">  WEMOS_C       <span class="comment">//      D0 D7 RX TX          16, 13,  3,  1 // Alternate</span></div><div class="line"><span class="comment">// endif</span></div><div class="line"><span class="comment">// if defined(ARDUINO_AVR_LEONARDO)</span></div><div class="line">                        <span class="comment">// 0 &amp; 1 are CMRI Serial, 2 &amp; 3 are I2C</span></div><div class="line">  CPNODE_LOW,           </div><div class="line">  CPNODE_HIGH,          </div><div class="line"><span class="comment">// endif</span></div></div><!-- fragment --><h1><a class="anchor" id="dependencies"></a>
Dependencies</h1>
<p>Arduino wire I2C implementation</p>
<h1><a class="anchor" id="author"></a>
Author</h1>
<p>Written by John Plocher</p>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Released under the terms of the MIT License (MIT) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
